<!DOCTYPE html>
<html lang="et">
<head>
  <meta charset="UTF-8">
  <title>DPD pakiautomaadid</title>
  <style>
    body { font-family: sans-serif; padding: 20px; }
    input { padding: 6px; width: 300px; }
    table { border-collapse: collapse; width: 100%; margin-top: 20px; }
    th, td { border: 1px solid #ccc; padding: 8px; }
    th { background-color: #f0f0f0; }
  </style>
</head>
<body>
  <h2>Otsi DPD pakiautomaate</h2>
  <input type="text" id="otsing" placeholder="Sisesta linn v천i aadress..." oninput="filtreeri()">

  <table id="tabel">
    <thead>
      <tr>
        <th>Nimi</th>
        <th>Aadress</th>
        <th>Linn</th>
        <th>Riik</th>
      </tr>
    </thead>
    <tbody></tbody>
  </table>

  <script>
    let k천ikAndmed = [];

    fetch('https://dpdbaltics.com/PickupParcelShopData.json')
      .then(res => res.json())
      .then(data => {
        k천ikAndmed = data;
        kuvaTabel(data);
      });

    function filtreeri() {
      const sisend = document.getElementById("otsing").value.toLowerCase();
      const filtreeritud = k천ikAndmed.filter(p =>
        (p.Name + p.Address + p.City + p.Country).toLowerCase().includes(sisend)
      );
      kuvaTabel(filtreeritud);
    }

    function kuvaTabel(andmed) {
      const tbody = document.querySelector("#tabel tbody");
      tbody.innerHTML = "";
      andmed.forEach(p => {
        const rida = document.createElement("tr");
        rida.innerHTML = `
          <td>${p.Name}</td>
          <td>${p.Address}</td>
          <td>${p.City}</td>
          <td>${p.Country}</td>
        `;
        tbody.appendChild(rida);
      });
    }
  </script>
</body>
</html>
